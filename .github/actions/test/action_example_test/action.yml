runs:
  using: composite
  steps:
  - name: Generate Boards
    shell: bash
    run: |
      for yamlFile in $(/usr/bin/find -L "${GITHUB_WORKSPACE}/source/board" -name '*.yaml')
      do
        ${GITHUB_WORKSPACE}/scripts/generateBoard.py ${yamlFile}
      done

      git add -N .
      git diff --exit-code
  - run: echo -----------------------------------------------------------------------------------
    shell: bash
  - name: Generate "Raw" Boards
    shell: bash
    run: |
      for yamlFile in $(/usr/bin/find -L "${GITHUB_WORKSPACE}/source/chip" -name '*.yaml')
      do
        ${GITHUB_WORKSPACE}/scripts/generateBoard.py ${yamlFile} -o /tmp/$(basename ${yamlFile} .yaml)
      done